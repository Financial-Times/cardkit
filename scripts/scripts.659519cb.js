"use strict";function getOverride(e,t,i){return i.theme.overrideConfigs.hasOwnProperty(e)&&null!==i.theme.overrideConfigs[e].hasOwnProperty(t)?i.theme.overrideConfigs[e][t]:null}angular.module("angular-google-auth",[]).factory("googleAuth",["$rootScope","$http","$q",function(e){var t={init:function(e){if("localhost"===document.domain)t.login({getEmail:function(){return"localhost@ft.com"}},e);else{var i=document.createElement("script");i.src="https://apis.google.com/js/client:platform.js?onload=cardKitAuth",document.body.appendChild(i),window.cardKitAuth=function(){gapi.signin2.render("my-signin2",{width:200,height:50,longtitle:!1,theme:"dark",onsuccess:function(i){t.login(i.getBasicProfile(),e)}})}}},login:function(t,i){var n=t.getEmail();if(n.match(/^.*\@ft\.com$/gi)){if("localhost@ft.com"!==n){var r=document.createElement("img");r.src="http://track.ft.com/track/track.gif?cardkit_login="+encodeURIComponent(n),document.body.appendChild(r)}e.$broadcast(i.evtName,t)}else gapi.auth2.getAuthInstance().disconnect(),gapi.auth2.getAuthInstance().signOut();e.$$phase||e.$apply()}};return t}]),angular.module("cardkitApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","colorpicker.module","draganddrop","ui.router","angular-google-auth","angulartics","angulartics.google.analytics"]).config(["$stateProvider","$urlRouterProvider",function(e,t){!function(e,t,i,n,r,o,a){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,o=t.createElement("script"),a=t.getElementsByTagName("script")[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",a.parentNode.insertBefore(o,a)}(window,document),ga("create","UA-60698836-2","auto"),t.otherwise("/"),e.state("index",{url:"/",controller:"MainCtrl",templateUrl:"views/main.html",resolve:{themeConfig:["themeConfigProvider",function(e){return e}],templateConfig:["templateConfigProvider",function(e){return e}]}}).state("login",{url:"/login",controller:"LoginCtrl",templateUrl:"views/login.html"})}]),angular.module("cardkitApp").controller("MainCtrl",["$scope","$location","$analytics","saveSvgAsPng","themeConfig","templateConfig",function(e,t,i,n,r,o){function a(){e.defaultConfig=angular.copy(e.config),e.$broadcast("resetSvg")}function u(t,i){var n=new FileReader;n.onload=function(){i.src=n.result,e.$apply()},n.readAsDataURL(t)}e.googleInfo||t.path("/login"),i.pageTrack("/homepage"),e.config={sizes:[{name:"Twitter",width:650,height:320,gridSize:16.25},{name:"Facebook",width:486,height:254,gridSize:12.15},{name:"FT Article",width:600,height:295,gridSize:15},{name:"Video",width:1024,height:576,gridSize:16.25}],themes:r,templates:o,output:{scale:2,editable:{scale:!0}},svg:{canvas:{height:function(){return e.size.height},width:function(){return e.size.width},gridSize:function(){return e.size.gridSize}}}},void 0!==e.config.themes&&(e.theme=e.config.themes.length>1?null:e.config.themes[0]),void 0!==e.config.templates&&(e.config.svg.elements=e.config.templates.length>1?null:e.config.template[0](e)),e.size=e.config.sizes.length>1?null:e.config.sizes[0],e.$watch("theme",function(){e.$broadcast("changeTheme"),a()}),e.$watch("template",function(t){t&&(e.config.svg.elements=t.elements(e),e.$broadcast("changeTemplate"),a())}),e.$watch("size",function(){e.$broadcast("changeSize"),a()}),e.resetSvg=function(){e.config.svg=e.defaultConfig.svg,a()},e.onDrop=function(e,t){u(function(e){return e.stopPropagation(),e.preventDefault(),e.dataTransfer||null}(t).files[0],this.element)},e.fileChanged=function(e){u(angular.element(e)[0].files[0],this.element)},e.removeImage=function(){this.element.src=""},e.display=function(){return"block"},e.downloadSvg=function(){i.eventTrack(e.template.name,{category:"save",label:e.size.name}),n(document.getElementById("snap-svg"),"image.png",{scale:e.config.output.scale})}}]),angular.module("cardkitApp").controller("LoginCtrl",["$rootScope","$scope","$location","googleAuth",function(e,t,i,n){t.trouble=function(e){var t=document.querySelector(".trouble__help");e=e||"100px"===t.style.height?0:"100px",t.style.height=e},t.$on("evtGoogleLogin",function(t,n){e.googleInfo=n,i.path("/home")}),n.init({client_id:"991906554139-pn6gc09ch9jb2iric7tms4jmg7gp8lur.apps.googleusercontent.com",evtName:"evtGoogleLogin"})}]),angular.module("cardkitApp").service("snapSVG",["$window",function(e){return e.Snap}]),angular.module("cardkitApp").directive("snapSvg",["snapSVG",function(e){return{template:'<svg id="snap-svg"></svg>',restrict:"E",scope:{svgConfig:"=",svgTheme:"="},link:function(t,i){function n(e){var t={};for(var i in e)switch(typeof e[i]){case"function":t[i]=e[i]();break;default:t[i]=e[i]}return t}function r(){h=n(l.canvas),g=p.rect(0,0,h.width,h.height,0,0).attr(h),!0===h.draggable&&g.altDrag(),f=[]}function o(){z={Sepia:p.paper.filter(e.filter.sepia(1)).attr({width:4*h.width+"px",height:4*h.height+"px"}),FTPink:p.paper.filter('<feColorMatrix type="matrix" in="SourceGraphic" result="blackAndWhiteFilter" values="0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0" /><feFlood result="pinkFilter" flood-color="#ffc99f"></feFlood><feBlend mode="multiply" in="pinkFilter" in2="blackAndWhiteFilter"></feBlend>').attr({width:4*h.width+"px",height:4*h.height+"px","background-blend-mode":"multiply"}),Grayscale:p.paper.filter(e.filter.grayscale(1)).attr({width:4*h.width+"px",height:4*h.height+"px"}),Saturate:p.paper.filter(e.filter.saturate(.5)).attr({width:4*h.width+"px",height:4*h.height+"px"}),Invert:p.paper.filter(e.filter.invert(1)).attr({width:4*h.width+"px",height:4*h.height+"px"}),Blur:p.paper.filter(e.filter.blur(4,4)).attr({width:4*h.width+"px",height:4*h.height+"px"})}}function a(e){var t;switch((e=n(e)).type){case"text":t=p.text(e.x,e.y);break;case"image":t=p.image(e.src,e.x,e.y,e.width,e.height);break;case"rect":t=p.rect(e.x,e.y,e.width,e.height,0,0);break;case"circle":break;case"group":var i;t="",angular.forEach(e.elements,function(e,n){u(i=a(e),e),0===n?t=p.group(i):t.group(i)});break;default:return!1}return void 0!==e.defaultFilter&&(""!==e.defaultFilter?t.attr({filter:z[e.defaultFilter]}):t.attr({filter:""})),t}function u(e,t){var i=n(t);return delete i.$$hashKey,"text"===i.type&&(i.text=function(e){return e.replace(/'''/g,"‴").replace(/(\W|^)"(\S)/g,"$1“$2").replace(/(\u201c[^"]*)"([^"]*$|[^\u201c"]*\u201c)/g,"$1”$2").replace(/([^0-9])"/g,"$1”").replace(/''/g,"″").replace(/(\W|^)'(\S)/g,"$1‘$2").replace(/([a-z])'([a-z])/gi,"$1’$2").replace(/((\u2018[^']*)|[a-z])'([^0-9]|$)/gi,"$1’$3").replace(/(\u2018)([0-9]{2}[^\u2019]*)(\u2018([^0-9]|$)|$|\u2019[a-z])/gi,"’$2$3").replace(/(\B|^)\u2018(?=([^\u2019]*\u2019\b)*([^\u2019\u2018]*\W[\u2019\u2018]\b|[^\u2019\u2018]*$))/gi,"$1’").replace(/'/g,"′")}(i.text),i.text=i.text.split("\n")),i.textTransform&&(e.node.style.textTransform=i.textTransform),e.attr(i),"text"===i.type&&e.selectAll("tspan").forEach(function(e,t){e.attr({x:i.x,y:i.y+i.fontSize*t})}),e}function c(){var e=n(t.svgConfig.canvas);p.attr({viewBox:"0, 0, "+e.width+", "+e.height,"data-width":e.width,"data-height":e.height}),u(g,t.svgConfig.canvas);var i;angular.forEach(t.svgConfig.elements,function(e,n){if(void 0!==f[n]){if("image"===(m=f[n]).type){i=m.matrix;var r=a(t.svgConfig.elements[n]);if(!1===r)return;m.after(r),r.transform(i),m.remove(),m=r,f[n]=m}if("g"===m.type){if(i=m.matrix,m.remove(),!1===(m=a(t.svgConfig.elements[n])))return;m.transform(i),f[n]=m}}else{if(!1===(m=a(e)))return;f.push(m)}delete e.$$hashKey,u(m,e),!0===e.draggable&&(m.undrag(),m.altDrag())})}var l=angular.fromJson(t.svgConfig);e.plugin(function(e,i){i.prototype.altDrag=function(){return this.drag(r,n,o),this};var n=function(){this.data("ot",this.transform().local)},r=function(e,i){var n,r,o=this.transform().diffMatrix.invert();o.e=o.f=0,n=o.x(e,i),r=o.y(e,i);var a=t.svgConfig.canvas.gridSize();n=Math.round(n/a)*a,r=Math.round(r/a)*a,this.transform(this.data("ot")+"t"+[n,r])},o=function(){}});var s,d,h,g,f,m,p,z;(p=e(i[0].children[0])).attr({height:"100%",width:"100%"}),s=p.paper.el("style",{type:"text/css"}),d=function(e,t){for(var i="",n=document.styleSheets,r=0;r<n.length;r++)if(function(e){return e&&0===e.lastIndexOf("http",0)&&-1===e.lastIndexOf(window.location.host)}(n[r].href))console.warn("Cannot include styles from other hosts: "+n[r].href);else{var o=n[r].cssRules;if(null!==o)for(var a=0;a<o.length;a++){var u=o[a];if(void 0!==u.style)try{e.querySelectorAll(u.selectorText).length>0?i+=(t?t(u.selectorText):u.selectorText)+" { "+u.style.cssText+" }\n":u.cssText.match(/^@font-face/)&&(i+=u.cssText+"\n")}catch(e){}}}return i}(p.node),s.node.innerHTML=d,s.toDefs(),r(),o(),t.$watch("svgConfig",c,!0),t.$on("changeTheme",c),t.$on("changeTemplate",function(){r(),c()}),t.$on("changeSize",function(){r(),c()}),t.$on("changeSize",o),t.$on("resetSvg",function(){var e=p.selectAll("*");angular.forEach(e,function(e){e.transform("")})})}}}]),angular.module("cardkitApp").service("saveSvgAsPng",["$window",function(e){return e.saveSvgAsPng}]),angular.module("cardkitApp").directive("fixedScroll",["$window",function(e){return function(t,i){var n=i.offset().top-20;angular.element(e).bind("scroll",function(){angular.element(e).scrollTop()>=n?i.addClass("fixed"):i.removeClass("fixed")})}}]),angular.module("cardkitApp").provider("themeConfigProvider",function(){return{$get:["$http","$q",function(e,t){var i=e.get("themes.config.json").catch(function(e){return 404===e.status?[]:t.reject(e)}),n=e.get("resources.json").catch(function(e){return 404===e.status?{}:t.reject(e)});return t.all([i,n]).then(function(e){for(var t,i=e[0].data,n=e[1].data,r=0;r<i.length;r++){t=i[r].images;for(var o in t)t[o]=n[t[o]]}return i})}]}});var templateHelper={logo:{width:function(e){var t=getOverride("templateHelperLogo","logoWidth",e),i=t||2;return e.size.gridSize*i},height:function(e){var t=getOverride("templateHelperLogo","logoHeight",e),i=t||2;return e.size.gridSize*i},x:function(e){var t=getOverride("templateHelperLogo","logoWidth",e);return e.size.width-(t?this.width(e):3*e.size.gridSize)},y:function(e){var t=getOverride("templateHelperLogo","logoHeight",e)?0:e.size.gridSize/2;return e.size.height-(this.height(e)+t)}},creditFontSize:function(e){return"Twitter"===e.size.name?e.theme.isNikkei?20:22:e.theme.isNikkei?16:18},headLineFontSize:function(e){return"Twitter"===e.size.name?e.theme.isNikkei?30:32:e.theme.isNikkei?22:24},crossReferenceBackground:{width:function(e){var t=getOverride("templateHelperLogo","logoWidth",e),i=t||2,n=t?e.size.gridSize*i:0;return e.size.width-n}}};angular.module("cardkitApp").provider("templateConfigProvider",function(){return{$get:function(){return[{name:"Quote",elements:function(e){return[{name:"Background Colour",type:"rect",controlsOrder:7,height:function(){return e.size.height},width:function(){return e.size.width},fill:function(){return e.theme.background}},{name:"Cross Reference Background",type:"rect",controlsOrder:5,height:function(){return 3*e.size.gridSize},width:function(){return templateHelper.crossReferenceBackground.width(e)},y:function(){return e.size.height-this.height()},fill:function(){return e.theme.xrefBackground}},{name:"Logo",type:"image",controlsOrder:6,width:function(){return templateHelper.logo.width(e)},height:function(){return templateHelper.logo.height(e)},src:function(){return e.theme.images.logoSrc},opacity:1,x:function(){return templateHelper.logo.x(e)},y:function(){return templateHelper.logo.y(e)},preserveAspectRatio:"xMinYMin meet",draggable:!1},{name:"Cross Reference Text",type:"text",text:"Read more at: Insert name here",controlsOrder:3,fill:function(){return e.theme.xref},fontSize:function(){return templateHelper.creditFontSize(e)},fontFamily:function(){return e.theme.xrefFont},textAnchor:"start",x:function(){return e.size.gridSize},y:function(){return e.size.height-e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (18px)":18,"Standard (22px)":22,"Large (24px)":24}}},{name:"Credit",type:"text",text:"Credit: Insert name here",controlsOrder:2,fill:function(){return e.theme.quote},fontSize:function(){return templateHelper.creditFontSize(e)},fontFamily:function(){return e.theme.creditFont},textAnchor:"start",textTransform:"uppercase",x:function(){return e.size.gridSize},y:function(){return e.size.height-5*e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (16px)":16,"Large (22px)":22}}},{name:"Headline",type:"text",text:"Add text or a quote here.\nYou can drag it around.\n\nMore text can go here",fill:function(){return e.theme.quote},controlsOrder:1,fontSize:function(){return templateHelper.headLineFontSize(e)},fontFamily:function(){return e.theme.headlineFont},textAnchor:"start",x:function(){return e.size.gridSize},y:function(){return 3*e.size.gridSize},fontWeight:600,draggable:!0,editable:{text:!0,fontSize:{"Small (24px)":24,"Standard (32px)":32,"Large (40px)":40,"X-Large (50px)":50}}}]}},{name:"Quote Big",elements:function(e){return[{name:"Background Colour",type:"rect",controlsOrder:7,height:function(){return e.size.height},width:function(){return e.size.width},fill:function(){return e.theme.background}},{name:"Cross Reference Background",type:"rect",controlsOrder:5,height:function(){return 3*e.size.gridSize},width:function(){return templateHelper.crossReferenceBackground.width(e)},y:function(){return e.size.height-this.height()},fill:function(){return e.theme.xrefBackground}},{name:"Logo",type:"image",controlsOrder:6,width:function(){return templateHelper.logo.width(e)},height:function(){return templateHelper.logo.height(e)},src:function(){return e.theme.images.logoSrc},opacity:1,x:function(){return templateHelper.logo.x(e)},y:function(){return templateHelper.logo.y(e)},preserveAspectRatio:"xMinYMin meet",draggable:!1},{name:"Cross Reference Text",type:"text",text:"Read more at: Insert name here",controlsOrder:3,fill:function(){return e.theme.xref},fontSize:function(){return"Twitter"===e.size.name?22:18},fontFamily:function(){return e.theme.xrefFont},textAnchor:"start",x:function(){return e.size.gridSize},y:function(){return e.size.height-e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (18px)":18,"Standard (22px)":22,"Large (24px)":24}}},{name:"Credit",type:"text",text:"Ogden Nash",controlsOrder:2,fill:function(){return e.theme.quote},fontSize:function(){return"Twitter"===e.size.name?22:16},fontFamily:function(){return e.theme.creditFont},textAnchor:"start",textTransform:"uppercase",x:function(){return e.size.gridSize},y:function(){return e.size.height-5*e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (16px)":16,"Large (22px)":22}}},{name:"Quote",type:"text",text:"Big quote here\nCan move",fill:function(){return e.theme.quote},controlsOrder:1,fontSize:function(){return"Twitter"===e.size.name?60:50},fontFamily:function(){return e.theme.headlineFont},textAnchor:"start",x:function(){return e.size.gridSize},y:function(){return 4*e.size.gridSize},fontWeight:600,draggable:!0,editable:{text:!0,fontSize:{"Small (50px)":50,"Standard (60px)":60,"Large (72px)":72}}}]}},{name:"Quote With Headshot",elements:function(e){return[{name:"Background Colour",type:"rect",controlsOrder:7,height:function(){return e.size.height},width:function(){return e.size.width},fill:function(){return e.theme.background}},{name:"Image",type:"image",width:function(){return 20*e.size.gridSize},controlsOrder:2,height:function(){return"function"==typeof this.width?this.width():this.width},src:function(){return e.theme.images.headshotSrc||""},opacity:1,x:function(){return 20*e.size.gridSize},y:function(){return e.size.gridSize},preserveAspectRatio:"xMinYMin meet",draggable:!0,defaultFilter:"",editable:{src:!0,width:!0,filters:["Grayscale"]}},{name:"Cross Reference Background",type:"rect",controlsOrder:5,height:function(){return 3*e.size.gridSize},width:function(){return templateHelper.crossReferenceBackground.width(e)},y:function(){return e.size.height-this.height()},fill:function(){return e.theme.xrefBackground}},{name:"Logo",type:"image",controlsOrder:6,width:function(){return templateHelper.logo.width(e)},height:function(){return templateHelper.logo.height(e)},src:function(){return e.theme.images.logoSrc},opacity:1,x:function(){return templateHelper.logo.x(e)},y:function(){return templateHelper.logo.y(e)},preserveAspectRatio:"xMinYMin meet",draggable:!1},{name:"Cross Reference Text",type:"text",text:"Read more at: Insert name here",controlsOrder:4,fill:function(){return e.theme.xref},fontSize:function(){return"Twitter"===e.size.name?22:18},fontFamily:function(){return e.theme.xrefFont},textAnchor:"start",x:function(){return e.size.gridSize},y:function(){return e.size.height-e.size.gridSize},fontWeight:500,draggable:!1,editable:{text:!0}},{name:"Credit",type:"text",text:"Shakespeare\nMuch Ado About Nothing",controlsOrder:3,fill:function(){return e.theme.quote},fontSize:function(){return"Twitter"===e.size.name?22:16},fontFamily:function(){return e.theme.creditFont},textAnchor:"start",textTransform:"uppercase",x:function(){return e.size.gridSize},y:function(){return e.size.height-6*e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (16px)":16,"Large (22px)":22}}},{name:"Headline",type:"text",text:"Friendship is constant\nin all other things save in\nthe office and affairs of\nlove: Therefore, all hearts\nin love use their own",fill:function(){return e.theme.quote},controlsOrder:1,fontSize:function(){return e.theme.isNikkei?"Twitter"===e.size.name?28:24:"Twitter"===e.size.name?32:26},fontFamily:function(){return e.theme.headlineFont},textAnchor:"start",x:function(){return e.size.gridSize},y:function(){return 3*e.size.gridSize},fontWeight:600,draggable:!0,editable:{text:!0,fontSize:{"Small (26px)":26,"Standard (32px)":32,"Large (40px)":40,"X-Large (50px)":50},fontStyle:{standard:"normal",italic:"italic"}}}]}},{name:"Big Number",elements:function(e){return[{name:"Background Colour",type:"rect",controlsOrder:7,height:function(){return e.size.height},width:function(){return e.size.width},fill:function(){return e.theme.background}},{name:"Cross Reference Background",type:"rect",controlsOrder:5,height:function(){return 3*e.size.gridSize},width:function(){return templateHelper.crossReferenceBackground.width(e)},y:function(){return e.size.height-this.height()},fill:function(){return e.theme.xrefBackground}},{name:"Logo",type:"image",controlsOrder:6,width:function(){return templateHelper.logo.width(e)},height:function(){return templateHelper.logo.height(e)},src:function(){return e.theme.images.logoSrc},opacity:1,x:function(){return templateHelper.logo.x(e)},y:function(){return templateHelper.logo.y(e)},preserveAspectRatio:"xMinYMin meet",draggable:!1},{name:"Cross Reference Text",type:"text",text:"Read more at: Insert name here",controlsOrder:3,fill:function(){return e.theme.xref},fontSize:function(){return"Twitter"===e.size.name?22:18},fontFamily:function(){return e.theme.xrefFont},textAnchor:"start",x:function(){return e.size.gridSize},y:function(){return e.size.height-e.size.gridSize},fontWeight:500,draggable:!1,editable:{text:!0,fontSize:{"Small (18px)":18,"Standard (22px)":22,"Large (24px)":24}}},{name:"Explanatory Text",type:"text",text:"Add text here - you can also drag it\naround. It can be one line or several.",controlsOrder:2,fill:function(){return e.theme.quote},fontSize:function(){return"Twitter"===e.size.name?32:26},fontFamily:function(){return e.theme.creditFont},textAnchor:"start",x:function(){return e.size.gridSize},y:function(){return 13*e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (26px)":26,"Medium (32px)":32,"Large (34px)":34}}},{name:"Big Number",type:"text",text:"Number",fill:function(){return e.theme.highlightColor},controlsOrder:1,fontSize:function(){return"Facebook"===e.size.name?80:100},fontFamily:function(){return e.theme.headlineFont},textAnchor:"start",x:function(){return e.size.gridSize},y:function(){return 7*e.size.gridSize},fontWeight:600,draggable:!0,editable:{text:!0}}]}},{name:"Illustration",elements:function(e){return[{name:"Background Colour",type:"rect",controlsOrder:10,height:function(){return e.size.height},width:function(){return e.size.width},fill:"#ffffff"},{name:"Illustration",type:"image",width:function(){return.7*e.size.width},controlsOrder:1,height:function(){return"string"==typeof this.width?+this.width:this.width()},src:function(){return e.theme.images.illustrationSrc},opacity:1,x:0,y:function(){return 2*e.size.gridSize},preserveAspectRatio:"xMinYMin meet",draggable:!0,defaultFilter:"",editable:{src:!0,width:!0,filters:["Grayscale"]}},{name:"Side Explanation Background",type:"rect",controlsOrder:10,height:function(){return e.size.height},width:function(){return.3*e.size.width},y:"0%",x:function(){return e.size.width-this.width()},fill:function(){return e.theme.xrefBackground}},{name:"Logo",type:"image",controlsOrder:6,width:function(){var t=getOverride("illustration","logoWidth",e),i=t||2;return e.size.gridSize*i},height:function(){return templateHelper.logo.height(e)},src:function(){return e.theme.images.logoWideSrc?e.theme.images.logoWideSrc:e.theme.images.logoSrc},opacity:1,x:function(){var t=getOverride("illustration","logoWidth",e);return e.size.width-(t?this.width(e):3*e.size.gridSize)},y:function(){return e.size.height-3*e.size.gridSize},preserveAspectRatio:"xMinYMin meet",draggable:!1},{name:"Ref Text",type:"text",text:"FT.COM/\nCOMPANIES",controlsOrder:3,fill:function(){return e.theme.xref},fontSize:function(){return e.theme.isNikkei?0:"Twitter"===e.size.name?18:14},fontFamily:function(){return e.theme.xrefFont},textAnchor:"start",x:function(){var t=e.size.width;return t-.3*t+e.size.gridSize},y:function(){var t=getOverride("illustration","refYPos",e);return e.size.height-(e.size.gridSize*(t||2)+2)},fontWeight:500,draggable:!1,editable:{text:!0}},{name:"Explanatory Text",type:"text",text:"Add text here.\n\nYou can also\ndrag it around.\n\nIt can be one\nline or several.",controlsOrder:2,fill:function(){return e.theme.xref},fontSize:function(){return"Twitter"===e.size.name?24:18},fontFamily:function(){return e.theme.creditFont},textAnchor:"start",width:function(){return.3*e.size.width},x:function(){var t=e.size.width;return t-.3*t+e.size.gridSize},y:function(){return 2*e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (18px)":18,"Standard (24px)":24,"Large (34px)":34}}}]}},{name:"Chart: 1 Column",elements:function(e){return[{name:"Background Colour",type:"rect",controlsOrder:10,height:function(){return e.size.height},width:function(){return e.size.width},fill:function(){return e.theme.background}},{name:"Graph",type:"image",width:function(){return.6*e.size.width},controlsOrder:1,height:function(){var t;return(t="string"==typeof this.width?+this.width:this.width())>e.size.height-2*e.size.gridSize&&(t=e.size.height-2*e.size.gridSize),t},src:function(){return e.theme.images.graphSrc},opacity:1,x:function(){return.7*e.size.width/2-.45*e.size.width/2},y:function(){return e.size.gridSize},preserveAspectRatio:"xMinYMin meet",draggable:!0,defaultFilter:"",editable:{src:!0,width:!0,filters:["Grayscale"]}},{name:"Side Explanation Background",type:"rect",controlsOrder:10,height:function(){return e.size.height},width:function(){return.3*e.size.width},y:"0%",x:function(){return e.size.width-this.width()},fill:function(){return e.theme.xrefBackground}},{name:"Logo",type:"image",controlsOrder:6,width:function(){var t=getOverride("chart1","logoWidth",e);return e.size.gridSize*(t||2)},height:function(){return templateHelper.logo.height(e)},src:function(){return e.theme.images.logoWideSrc?e.theme.images.logoWideSrc:e.theme.images.logoSrc},opacity:1,x:function(){var t=getOverride("chart1","logoWidth",e);return e.size.width-(t?this.width(e):3*e.size.gridSize)},y:function(){return e.size.height-3*e.size.gridSize},preserveAspectRatio:"xMinYMin meet",draggable:!1},{name:"Reference Text",type:"text",text:"FT.COM/\nCOMPANIES",controlsOrder:3,fill:function(){return e.theme.xref},fontSize:function(){return e.theme.isNikkei?0:"Twitter"===e.size.name?18:14},fontFamily:function(){return e.theme.xrefFont},textAnchor:"start",x:function(){var t=e.size.width;return t-.3*t+e.size.gridSize},y:function(){var t=getOverride("chart1","refYPos",e);return e.size.height-(e.size.gridSize*(t||2)+2)},fontWeight:500,draggable:!1,editable:{text:!0}},{name:"Explanatory Text",type:"text",text:"Add text here.\n\nYou can drag\nit around.\n\nIt can be one\nline or several.",controlsOrder:2,fill:function(){return e.theme.xref},fontSize:function(){return"Twitter"===e.size.name?24:18},fontFamily:function(){return e.theme.creditFont},textAnchor:"start",width:function(){return.3*e.size.width},x:function(){var t=e.size.width;return t-.3*t+e.size.gridSize},y:function(){return 2*e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (18px)":18,"Medium (20px)":20,"Standard (24px)":24,"Large (34px)":34}}}]}},{name:"Chart: 2 Column",elements:function(e){return[{name:"Background Colour",type:"rect",controlsOrder:7,height:function(){return e.size.height},width:function(){return e.size.width},fill:function(){return e.theme.background}},{name:"Graph",type:"image",width:function(){return.7*e.size.width},controlsOrder:1,height:function(){var t;return(t="string"==typeof this.width?+this.width:this.width())>e.size.height-2*e.size.gridSize&&(t=e.size.height-2*e.size.gridSize),t},src:function(){return e.theme.images.graphWideSrc},opacity:1,x:function(){return e.size.gridSize},y:function(){return e.size.gridSize},preserveAspectRatio:"xMinYMin meet",draggable:!0,defaultFilter:"",editable:{src:!0,width:!0,filters:["Grayscale"]}},{name:"Side Explanation Background",type:"rect",controlsOrder:5,height:function(){return e.size.height},width:function(){return.25*e.size.width},y:"0%",x:function(){return e.size.width-this.width()},fill:function(){return e.theme.xrefBackground}},{name:"Logo",type:"image",controlsOrder:6,width:function(){var t=getOverride("chart2","logoWidth",e);return e.size.gridSize*(t||2)},height:function(){var t=getOverride("chart2","logoHeight",e);return e.size.gridSize*(t||2)},src:function(){return e.theme.images.logoWideSrc?e.theme.images.logoWideSrc:e.theme.images.logoSrc},opacity:1,x:function(){var t=getOverride("chart2","logoWidth",e);return e.size.width-(t?this.width(e):3*e.size.gridSize)},y:function(){var t=getOverride("chart2","logoWidth",e)?0:e.size.gridSize;return e.size.height-(this.height(e)+t)},preserveAspectRatio:"xMidYMid slice",draggable:!1},{name:"Reference Text",type:"text",text:"FT.COM/\nCOMPANIES",controlsOrder:3,fill:function(){return e.theme.xref},fontSize:function(){return e.theme.isNikkei?0:"Twitter"===e.size.name?18:14},fontFamily:function(){return e.theme.xrefFont},textAnchor:"start",x:function(){var t=e.size.width;return t-.25*t+e.size.gridSize},y:function(){var t=getOverride("chart2","refYPos",e);return e.size.height-(e.size.gridSize*(t||2)+2)},fontWeight:500,draggable:!1,editable:{text:!0}},{name:"Explanatory Text",type:"text",text:"Add text here.\n\nYou can drag\nit around.\n\nIt can be one\nline or several.",controlsOrder:2,fill:function(){return e.theme.xref},fontSize:function(){return"Facebook"===e.size.name?14:18},fontFamily:function(){return e.theme.creditFont},textAnchor:"start",width:function(){return.25*e.size.width},x:function(){var t=e.size.width;return t-.25*t+e.size.gridSize},y:function(){return 2*e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (14px)":14,"Standard (18px)":18,"Large (22px)":22}}}]}},{name:"Promo A",elements:function(e){return[{name:"Background Colour",type:"rect",controlsOrder:7,height:function(){return e.size.height},width:function(){return e.size.width},fill:function(){return e.theme.background}},{name:"Promo Image",type:"image",width:function(){return e.size.width},controlsOrder:1,height:function(){return"string"==typeof this.width?+this.width:this.width()},src:function(){return e.theme.images.promoSrc},opacity:1,x:"0%",y:"0%",preserveAspectRatio:"xMinYMin meet",draggable:!0,defaultFilter:"",editable:{src:!0,width:!0,filters:["Grayscale"]}},{name:"Cross Reference Background",type:"rect",controlsOrder:5,height:function(){return 3*e.size.gridSize},width:function(){return templateHelper.crossReferenceBackground.width(e)},y:function(){return e.size.height-this.height()},fill:function(){return e.theme.xrefBackground}},{name:"Logo",type:"image",controlsOrder:6,width:function(){return templateHelper.logo.width(e)},height:function(){return templateHelper.logo.height(e)},src:function(){return e.theme.images.logoSrc},opacity:1,x:function(){return templateHelper.logo.x(e)},y:function(){return templateHelper.logo.y(e)},preserveAspectRatio:"xMinYMin meet",draggable:!1},{name:"Cross Reference Text",type:"text",text:"Promo A please go to xyz.com/something",controlsOrder:2,fill:function(){return e.theme.xref},fontSize:function(){return"Twitter"===e.size.name?22:18},fontFamily:function(){return e.theme.xrefFont},textAnchor:"start",x:function(){return e.size.gridSize},y:function(){return e.size.height-e.size.gridSize},fontWeight:500,draggable:!1,editable:{text:!0,fontSize:{"Small (18px)":18,"Standard (22px)":22,"Large (24px)":24}}}]}},{name:"Promo B",elements:function(e){return[{name:"Background Colour",type:"rect",controlsOrder:7,height:function(){return e.size.height},width:function(){return e.size.width},fill:function(){return e.theme.background}},{name:"Promo Image",type:"image",width:function(){return.75*e.size.width},controlsOrder:1,height:function(){return"string"==typeof this.width?+this.width:this.width()},src:function(){return e.theme.images.promoSrc},opacity:1,x:"0%",y:"0%",preserveAspectRatio:"xMinYMin meet",draggable:!0,defaultFilter:"",editable:{src:!0,width:!0,filters:["Grayscale"]}},{name:"Side Explanation Background",type:"rect",controlsOrder:5,height:function(){return e.size.height},width:function(){return.25*e.size.width},y:"0%",x:function(){return e.size.width-this.width()},fill:function(){return e.theme.xrefBackground}},{name:"Logo",type:"image",controlsOrder:6,width:function(){var t=getOverride("promoB","logoWidth",e);return e.size.gridSize*(t||2)},height:function(){var t=getOverride("promoB","logoHeight",e);return e.size.gridSize*(t||2)},src:function(){return e.theme.images.logoWideSrc?e.theme.images.logoWideSrc:e.theme.images.logoSrc},opacity:1,x:function(){var t=getOverride("promoB","logoWidth",e);return e.size.width-(t?this.width(e):3*e.size.gridSize)},y:function(){var t=getOverride("promoB","logoHeight",e)?0:e.size.gridSize;return e.size.height-(this.height(e)+t)},preserveAspectRatio:"xMidYMid slice",draggable:!1},{name:"Explanatory Text",type:"text",text:"Promo B\nplease go\nto xyz.com/\nsomething-\ninteresting",controlsOrder:2,fill:function(){return e.theme.xref},fontSize:function(){return"Twitter"===e.size.name?24:18},fontFamily:function(){return e.theme.creditFont},textAnchor:"start",width:function(){return.25*e.size.width},x:function(){var t=e.size.width;return t-.25*t+e.size.gridSize},y:function(){return 2*e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (18px)":18,"Standard (24px)":24,"Large (28px)":28}}}]}},{name:"Breaking News",elements:function(e){return[{name:"Background Colour",type:"rect",controlsOrder:17,height:function(){return e.size.height},width:function(){return e.size.width},fill:function(){return e.theme.background}},{name:"Header Background",type:"rect",controlsOrder:15,height:function(){return 3*e.size.gridSize},width:function(){return e.size.width},y:0,fill:function(){return e.theme.highlightColor}},{name:"Logo",type:"image",controlsOrder:16,width:function(){return templateHelper.logo.width(e)},height:function(){return templateHelper.logo.height(e)},src:function(){return e.theme.images.logoAltSrc},opacity:1,x:function(){return templateHelper.logo.x(e)},y:function(){var t=0===getOverride("breakingNews","logoYPos",e)?0:e.size.gridSize;return e.size.height-(this.height(e)+t)},preserveAspectRatio:"xMinYMin meet",draggable:!1},{name:"Bookmark",type:"image",controlsOrder:16,width:function(){return e.size.gridSize},height:function(){return 2*e.size.gridSize},src:function(){return e.theme.images.bookmark},opacity:1,x:function(){return e.size.width-(this.width()+e.size.gridSize)},y:function(){return(3.5*e.size.gridSize-this.height())/2},preserveAspectRatio:"xMinYMin meet",draggable:!1},{name:"Header Text",type:"text",text:"Forex Scandal",textTransform:"uppercase",controlsOrder:1,fill:function(){return e.theme.xref},fontSize:function(){return"Twitter"===e.size.name?24:18},fontFamily:function(){return e.theme.xrefFont},textAnchor:"start",x:function(){return e.size.gridSize},y:function(){return 2*e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (18px)":18,"Standard (24px)":24,"Large (28px)":28}}},{name:"Credit",type:"text",text:"Name here in caps",controlsOrder:3,fill:function(){return e.theme.quote},fontSize:function(){return"Twitter"===e.size.name?22:18},fontFamily:function(){return e.theme.creditFont},textAnchor:"start",textTransform:"uppercase",x:function(){return e.size.gridSize},y:function(){return e.size.height-5*e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (18px)":18,"Large (22px)":22}}},{name:"Read more",type:"text",text:"Read more about the case on ft.com/xxxxx",controlsOrder:4,fill:function(){return e.theme.highlightColor},fontSize:function(){return"Twitter"===e.size.name?18:14},fontFamily:function(){return e.theme.creditFont},textAnchor:"start",textTransform:"uppercase",x:function(){return e.size.gridSize},y:function(){return e.size.height-e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (14px)":14,"Standard (18px)":18,"Large (22px)":22}}},{name:"Quote",type:"text",text:"‘Breaking news’",fill:function(){return e.theme.quote},controlsOrder:2,fontSize:function(){return"Twitter"===e.size.name?44:34},fontFamily:function(){return e.theme.headlineFont},textAnchor:"start",x:function(){return e.size.gridSize},y:function(){return 6*e.size.gridSize},fontWeight:600,draggable:!0,editable:{text:!0,fontSize:{"Small (32px)":32,"Standard (44px)":44,"Large (50px)":50}}}]}},{name:"FT Weekend -- Quote With Headshot",elements:function(e){return[{name:"Background Colour",type:"rect",controlsOrder:7,height:function(){return e.size.height},width:function(){return e.size.width},fill:function(){return e.theme.background}},{name:"Image",type:"image",width:function(){return 20*e.size.gridSize},controlsOrder:2,height:function(){return"function"==typeof this.width?this.width():this.width},src:function(){return e.theme.images.headshotSrc||""},opacity:1,x:function(){var t;return t="function"==typeof this.width?this.width():+this.width,e.size.width-(t+e.size.gridSize)},y:function(){return e.size.gridSize},preserveAspectRatio:"xMinYMin meet",draggable:!0,defaultFilter:"",editable:{src:!0,width:!0,filters:["Grayscale"]}},{name:"Cross Reference Background",type:"rect",controlsOrder:5,height:function(){return 3*e.size.gridSize+5},width:function(){return e.size.width+10},x:-5,y:function(){return e.size.height-this.height()+5},fill:function(){return e.theme.background},stroke:function(){return e.theme.quote}},{name:"Logo",type:"text",text:function(){return e.theme.xrefText||"FT Weekend"},controlsOrder:4,fill:function(){return e.theme.xrefBackground},fontSize:function(){return"Twitter"===e.size.name?28:24},fontFamily:function(){return e.theme.headlineFont},textAnchor:"start",x:function(){return e.size.gridSize},y:function(){return e.size.height-e.size.gridSize},fontWeight:600,draggable:!1},{name:"Credit",type:"text",text:"Janan Ganesh on why\nLabour is Terrible",controlsOrder:3,fill:function(){return e.theme.quote},fontSize:function(){return"Twitter"===e.size.name?22:16},fontFamily:function(){return e.theme.creditFont},textAnchor:"start",textTransform:"uppercase",x:function(){return e.size.gridSize},y:function(){return e.size.height-6*e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (16px)":16,"Large (22px)":22}}},{name:"Headline",type:"text",text:"Friendship is constant\nin all other things save in\nthe office and affairs of\nlove: Therefore, all hearts\nin love use their own",fill:function(){return e.theme.quote},controlsOrder:1,fontSize:function(){return"Twitter"===e.size.name?32:26},fontFamily:function(){return e.theme.headlineFont},textAnchor:"start",x:function(){return e.size.gridSize},y:function(){return 3*e.size.gridSize},fontWeight:600,draggable:!0,editable:{text:!0,fontSize:{"Small (26px)":26,"Standard (32px)":32,"Large (40px)":40,"X-Large (50px)":50}}}]}},{name:"FT Weekend -- Magazine Sidebar",elements:function(e){return[{name:"Background Colour",type:"rect",controlsOrder:10,height:function(){return e.size.height},width:function(){return e.size.width},fill:function(){return e.theme.background}},{name:"Image",type:"image",width:function(){return.6*e.size.width},controlsOrder:1,height:function(){return"string"==typeof this.width?+this.width:this.width()},src:"",opacity:1,x:"0%",y:"0%",preserveAspectRatio:"xMinYMin meet",draggable:!0,defaultFilter:"",editable:{src:!0,width:!0,filters:["Grayscale"]}},{name:"Side Explanation Background",type:"rect",controlsOrder:10,height:function(){return e.size.height},width:function(){return.3*e.size.width},y:"0%",x:function(){return e.size.width-this.width()},fill:"rgb(30,75,115)"},{name:"Logo",type:"image",controlsOrder:10,width:function(){return.3*e.size.width-2*e.size.gridSize},height:function(){return 4*e.size.gridSize},src:function(){return e.theme.images.weekendSrc||e.theme.images.logoSrc},opacity:1,x:function(){return e.size.width-11*e.size.gridSize},y:function(){return e.size.gridSize},preserveAspectRatio:"xMinYMin meet",draggable:!1},{name:"Reference Text",type:"text",text:"READ MORE AT\nXYZ.COM/ABC",controlsOrder:3,fill:function(){return e.theme.xref},fontSize:function(){return"Twitter"===e.size.name?18:14},fontFamily:function(){return e.theme.xrefFont},textAnchor:"start",x:function(){var t=e.size.width;return t-.3*t+e.size.gridSize},y:function(){return e.size.height-(2*e.size.gridSize+2)},fontWeight:500,draggable:!0,editable:{text:!0}},{name:"Explanatory Text",type:"text",text:"Add text here -\nYou can also drag\nit around.\n\nIt can be over one\nline or several.",controlsOrder:2,fill:function(){return e.theme.xref},fontSize:function(){return"Twitter"===e.size.name?24:18},fontFamily:"financierdisplayweb",textAnchor:"start",width:function(){return 12*e.size.gridSize},x:function(){return e.size.width-11*e.size.gridSize},y:function(){return 7*e.size.gridSize},fontWeight:500,draggable:!0,editable:{text:!0,fontSize:{"Small (18px)":18,"Standard (24px)":24,"Large (34px)":34}}}]}},{name:"FT Weekend -- Recipe Card",elements:function(e){return[{name:"Background Colour",type:"rect",controlsOrder:10,height:function(){return e.size.height},width:function(){return e.size.width},fill:function(){return e.theme.background}},{name:"Recipe Image",type:"image",width:function(){return.6*e.size.width},controlsOrder:1,height:function(){return"string"==typeof this.width?+this.width:this.width()},src:"",opacity:1,x:"0%",y:"0%",preserveAspectRatio:"xMinYMin meet",draggable:!0,defaultFilter:"",editable:{src:!0,width:!0,filters:["Grayscale"]}},{name:"Side Explanation Background",type:"rect",controlsOrder:10,height:function(){return e.size.height},width:function(){return.3*e.size.width},y:"0%",x:function(){return e.size.width-this.width()},fill:"rgb(67,20,95)"},{name:"Logo",type:"text",text:"FT Weekend",fill:"white",fontSize:function(){return"Twitter"===e.size.name?28:22},fontFamily:function(){return e.theme.headlineFont},textAnchor:"start",x:function(){return e.size.width-11*e.size.gridSize},y:function(){return 2*e.size.gridSize},fontWeight:600,draggable:!1},{name:"Reference Text",type:"text",text:"READ THE RECIPE AT\nFT.COM/XXX",controlsOrder:3,fill:function(){return e.theme.xref},fontSize:function(){return"Twitter"===e.size.name?18:14},fontFamily:function(){return e.theme.xrefFont},textAnchor:"start",x:function(){var t=e.size.width;return t-.3*t+e.size.gridSize},y:function(){return e.size.height-(2*e.size.gridSize+2)},fontWeight:500,draggable:!0,editable:{text:!0}},{name:"Recipe Name",type:"text",text:"Steak and\nkidney pudding",controlsOrder:2,fill:function(){return e.theme.xref},fontSize:function(){return"Twitter"===e.size.name?24:18},fontFamily:"metricweb",textAnchor:"start",width:function(){return 12*e.size.gridSize},x:function(){return e.size.width-11*e.size.gridSize},y:function(){return 6.8*e.size.gridSize},fontWeight:400,draggable:!0,editable:{text:!0,fontSize:{"Small (18px)":18,"Standard (24px)":24,"Large (34px)":34}}},{name:"Author Name",type:"text",text:"Rowley Leigh",controlsOrder:2,fill:function(){return e.theme.xref},fontSize:function(){return"Twitter"===e.size.name?24:18},fontFamily:"financierdisplayweb",fontStyle:"italic",textAnchor:"start",width:function(){return 12*e.size.gridSize},x:function(){return e.size.width-11*e.size.gridSize},y:function(){return 5.25*e.size.gridSize},fontWeight:300,draggable:!0,editable:{text:!0,fontSize:{"Small (18px)":18,"Standard (24px)":24,"Large (34px)":34}}}]}},{name:"Video ",elements:function(e){return[{name:"Background Colour",type:"rect",height:function(){return e.size.height},width:function(){return e.size.width},fill:function(){return e.theme.background}},{name:"Background Image",type:"image",width:function(){return e.size.width},controlsOrder:5,height:function(){return"string"==typeof this.width?+this.width:this.width()},src:function(){return e.theme.images.videoBackgroundImage},opacity:1,x:function(){return 0},y:function(){return 0},preserveAspectRatio:"xMinYMin meet",draggable:!0,defaultFilter:"",enabled:!0,editable:{src:!0,width:!0,filters:["Grayscale","FTPink"]}},{name:"Text Background",type:"rect",controlsOrder:4,defaultDisplay:function(){return"block"},height:function(){return"Video"===e.size.name?95:3*e.size.gridSize},width:function(){return e.size.width},y:function(){return e.size.height-this.height()},fill:function(){return e.theme.xrefBackground},editable:{display:{Hide:"none",Show:"block"}}},{name:"FT Logo",type:"image",controlsOrder:2,defaultDisplay:function(){return"block"},width:function(){return"Video"===e.size.name?5.8*e.size.gridSize:3*e.size.gridSize},height:function(){return"Video"===e.size.name?5.8*e.size.gridSize:3*e.size.gridSize},src:function(){return e.theme.images.logoSrc},opacity:.85,x:function(){return"Video"===e.size.name?1.8*e.size.gridSize:1.5*e.size.gridSize},y:function(){return"Video"===e.size.name?1.8*e.size.gridSize:1.5*e.size.gridSize},preserveAspectRatio:"xMaxYMax meet",draggable:!1,editable:{display:{Hide:"none",Show:"block"}}},{name:"Text",type:"text",text:"",controlsOrder:1,fill:function(){return e.theme.xref},fontSize:function(){switch(e.size.name){case"Twitter":return 22;case"Video":return 76;default:return 18}},lineHeight:function(){return 30},fontFamily:function(){return e.theme.font},textAnchor:"start",x:function(){return.055*e.size.height},y:function(){return"Video"===e.size.name?e.size.height-29:e.size.height-e.size.gridSize},fontWeight:500,draggable:!1,editable:{text:!0}},{name:"Headshot",type:"image",width:function(){return"Video"===e.size.name?28*e.size.gridSize:15*e.size.gridSize},controlsOrder:6,height:function(){return"function"==typeof this.width?this.width():this.width},src:function(){return e.theme.images.headshotSrc||""},opacity:1,x:function(){return e.size.width-this.width()},y:function(){return e.size.height-this.height()+1},preserveAspectRatio:"xMaxYMax meet",draggable:!0,defaultFilter:"",editable:{src:!0,filters:["Grayscale"]}},{name:"Reuters Logo",type:"image",defaultDisplay:function(){return"none"},width:function(){return"Video"===e.size.name?18*e.size.gridSize:10*e.size.gridSize},controlsOrder:3,height:function(){return"function"==typeof this.width?this.width():this.width},src:function(){return e.theme.images.reutersLogo||""},opacity:1,x:function(){return.055*e.size.height},y:function(){return"Video"===e.size.name?e.size.height-this.width()-14:e.size.height-this.width()-4},preserveAspectRatio:"xMaxYMax meet",editable:{display:{Hide:"none",Show:"block"}}}]}}]}}}),angular.module("cardkitApp").directive("textEditor",function(){return{template:'<div><label>Text</label><textarea ng-model="element.text" class="form-control"></textarea></div>',restrict:"E",replace:!0,scope:{element:"="}}}),angular.module("cardkitApp").directive("fillEditor",function(){return{template:'<div><label>Fill Color</label><input colorpicker type="text" ng-model="element.fill" ng-if="field == \'picker\'" class="form-control" /><select ng-model="element.fill" ng-options="name for (name, value) in field" class="form-control" ng-if="field != \'picker\'"><option value="">-- Select a Fill Color --</option></select></div>',restrict:"E",scope:{field:"=",element:"="}}}),angular.module("cardkitApp").directive("fontsizeEditor",function(){return{template:'<div><label>Font Size</label><select ng-model="element.fontSize" ng-options="name for (name, value) in field" class="form-control"><option value="">-- Select a Font Size --</option></select></div>',restrict:"E",replace:!0,scope:{element:"=",field:"="}}}),angular.module("cardkitApp").directive("fontstyleEditor",function(){return{template:'<div><label>Font Style</label><select ng-model="element.fontStyle" ng-options="name for (name, value) in field" class="form-control"><option value="">-- Select a Font Style --</option></select></div>',restrict:"E",replace:!0,scope:{element:"=",field:"="}}}),angular.module("cardkitApp").directive("fontfamilyEditor",function(){return{template:'<div><label>Font Family</label><select ng-model="element.fontFamily" ng-options="name for (name, value) in field" class="form-control"><option value="">-- Select a Font Family --</option></select></div>',restrict:"E",replace:!0,scope:{element:"=",field:"="}}}),angular.module("cardkitApp").directive("imageEditor",function(){return{template:'<div><label>Image</label><div class="warning label"><em>Heads Up!</em> Only images from the story you are tweeting can be used and then only if they are <em>FT-owned</em> or come from <em>Getty, Reuters, Dreamstime</em> or <em>Bloomberg</em></div><div class="dropzone" drop="onDrop($data, $event, key)" drop-effect="copy" drop-accept="\'Files\'" drag-over-class="drag-over-accept"><div class="fileInputWrapper button"><span>or select an image</span><input onchange="angular.element(this).scope().$parent.fileChanged(this, event)" data-key="{{key}}" type="file" accept="image/*" /></div></div><button ng-show="config.elements[key].src !== \'\'" ng-click="removeImage(key)" class="button button-danger"><i class="fa fa-times"></i> Remove Image</button></div>',restrict:"E",scope:{key:"=",onDrop:"=",element:"=",removeImage:"="}}}),angular.module("cardkitApp").directive("sizeEditor",function(){return{template:'<div><label>Size</label><input type="range" min="10" max="2000" ng-model="element.width" /></div>',restrict:"E",replace:!0,scope:{element:"="}}}),angular.module("cardkitApp").directive("textanchorEditor",function(){return{template:'<div><label>Text Anchor</label><select ng-model="element.textAnchor" class="form-control"><option value="">-- Select a Text Anchor --</option><option value="start">Start</option><option value="middle">Middle</option><option value="end">End</option></select></div>',restrict:"E",replace:!0,scope:{element:"="}}}),angular.module("cardkitApp").directive("opacityEditor",function(){return{template:'<div><label>Opacity</label><input type="range" min="0" max="1" ng-model="element.opacity" step="0.05" /></div>',restrict:"E",replace:!0,scope:{element:"=element"}}}),angular.module("cardkitApp").directive("filterEditor",function(){return{template:'<div><label>Filter</label><select ng-model="element.defaultFilter" ng-options="filter for filter in filters" class="form-control"><option value="">No filter</option></select></div>',replace:!0,restrict:"E",scope:{element:"=",filters:"="}}}),angular.module("cardkitApp").directive("showhideEditor",function(){return{template:'<div class="showhideEditor"><label ng-repeat="(name, value) in field" ng-init="element.display=element.defaultDisplay()"><input type="radio" ng-model="element.display" ng-value="value" name="{{element.name}}">{{name}}</label></div>',restrict:"E",replace:!0,scope:{element:"=",field:"=",options:"="}}});